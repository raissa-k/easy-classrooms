<%- include('partials/header', {navbar: "yes" , title: "Teacher Panel" , active: "teacher-panel" }) -%>

 
<div class="px-4 xl:px-0">
	<div class="mx-auto container">
		<div class="flex flex-col">
			<div class="pl-4 md:pl-10 py-4 md:py-7 rounded-tl-md rounded-tr-md shadow bg-gradient-to-r from-secondary/10 via-transparent to-secondary/10 flex justify-between gap-4 flex-wrap">
				<h1 class="sm:text-xl md:text-2xl lg:text-4xl font-bold leading-normal">Classroom management</h1>

				<div class="flex flex-wrap gap-4 pr-4">
					<button class="btn btn-primary btn-outline" data-modal-trigger="" id="addLesson-toggle" aria-controls="addLesson" aria-expanded="false">
						Add lesson
						<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-2 inline-block w-5 h-5 stroke-current pointer-events-none">
							<path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
						</svg>
					</button>

					<%- include('partials/modal-blank', {modalName: "addLesson" , modalTitle: "Add lesson" , prose: "not-prose", partial: "modal-createLesson", icon: "add"}) -%>
				</div>
			</div>
		</div>
			<div class="bg-primary-content/5 shadow-lg pb-8 px-4 md:px-8 xl:px-10 rounded-md">
		
				<div class="py-8 not-prose flex flex-col md:flex-row gap-8">
					<div class="w-full max-w-xs mb-auto border border-base-content border-opacity-20 card bg-base-100 mx-auto shadow-xl">
						<figure class="w-full h-32" style="background-image: linear-gradient(
							hsla(var(--p)/.3), 
							hsla(var(--s)/.3)
							), url(<%=classrooms.image%>); background-size: cover; background-position: top; filter: opacity(0.8);"></figure>
						<div class="card-body gap-6">
							<h2 class="card-title"><%=classrooms.name%></h2>
							<p><%=classrooms.description%></p>

							<div class="relative flex flex-col border border-base-content border-opacity-20 rounded-lg" aria-label="Classroom password">
								<div class="pl-4 py-4 border border-inherit border-x-transparent border-t-transparent bg-gradient-to-b from-primary/10 to-secondary/10 flex align-middle flex-wrap gap-6 justify-between">
									<span class="text-base font-semibold self-center">Password </span>
									<button class="btn btn-ghost btn-active mr-4 clipboard-copy tooltip tooltip-accent" data-tip="Click to copy" id="<%=classrooms.accessName%>">
									<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline">
										<path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75" />
									</svg>
									</button>
								</div>
								<p class="py-6 px-4 mx-auto font-semibold"><%=classrooms.accessName%></p>
							</div>

							<div class="flex flex-col gap-2">
								<button class="btn btn-secondary" data-modal-trigger="" id="editClass-btoggle" aria-controls="editClass" aria-expanded="false">
									Edit<span class="sr-only"> classroom</span>
								</button>
				
								<%- include('partials/modal-blank', {modalName: "editClass" , modalTitle: "Edit classroom" , prose: "not-prose", partial: "modal-editClass", icon: "edit"}) -%>
	
								<button type="submit" class="btn btn-error tooltip tooltip-warning flex gap-2" data-tip="This action is permanent" data-modal-trigger="" id="deleteClass-toggle" aria-controls="deleteClass" aria-expanded="false">
									Delete<span class="sr-only"> classroom<span>								  
								</button>

								<%- include('partials/modal-blank', {modalName: "deleteClass" , modalTitle: "Delete classroom" , prose: "not-prose", partial: "modal-deleteClass", icon: "delete"}) -%>
							</div>
						</div>
					</div>

				<div class="overflow-x-auto w-full">
					<table class="table table-zebra w-full">
						<!-- head -->
						<thead class="border-b border-base-content border-opacity-20">
							<tr>
								<th>Lesson</th>
								<th></th>
								<th></th>
							</tr>
						</thead>
						<caption class="sr-only">List of lessons</caption>
						<tbody>
							<%if (lessons.length > 0 ) {%>
								<div>
									<button class="btn btn-primary btn-outline hidden" data-modal-trigger="" id="deleteLesson-toggle" aria-controls="deleteLesson-modal" aria-expanded="false">
										Add lesson
										<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-2 inline-block w-5 h-5 stroke-current pointer-events-none">
											<path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
										</svg>
									</button>
				
									<%- include('partials/modal-blank', {modalName: "deleteLesson-modal" , modalTitle: "Delete lesson" , prose: "not-prose", partial: "modal-deleteLesson", icon: "delete"}) -%>
								</div>
								<% lessons.forEach (el=> { %>
							<tr class="hover">
								<td>
									<%= el.title %>
									<br>
									<span class="badge badge-ghost">Created: <%= new Date(el.createdAt).toLocaleDateString('en', { year: 'numeric' , month: 'long' , day: '2-digit' }) %></span>
								</td>
								<td>
								  <a href="#<%=el._id%>" class="btn btn-square btn-outline btn-sm">
									<span class="sr-only"></span>
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
										<path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z" />
										<path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z" />
									  </svg>									  
								  </a>
								</td>
								<td>
									<button type="submit" class="btn btn-outline btn-error btn-sm btn-square tooltip tooltip-warning" data-tip="This action is permanent" onclick="openDeleteModal(this.dataset.id)" data-id="<%= el._id %>">
										<span class="sr-only">Delete this lesson</span>
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mx-auto">
											<path fill-rule="evenodd" d="M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z" clip-rule="evenodd" />
										  </svg>										  
									</button>
								</td>
							</tr>
								<% }) %>
							<% } else { %>
							<tr class="hover">
								<td>
									No lesson found.
								</td>
								<td></td>
								<td>
									<button class="btn btn-ghost btn-xs"  data-modal-trigger="" id="addLesson-tabletoggle" aria-controls="addLesson-table" aria-expanded="false">
										Create
										<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-2 inline-block w-5 h-5 stroke-current pointer-events-none">
											<path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
										</svg>
									</button>
									<%- include('partials/modal-blank', {modalName: "addLesson-table" , modalTitle: "Add lesson" , prose: "not-prose", partial: "modal-createLesson", icon: "add"}) -%>
								</td>
							</tr>
							<%}%>
						</tbody>
					</table>
				</div>

			</div>
		</div>
	</div>
</div>
</div>					
					
<%- include('partials/footer') -%>